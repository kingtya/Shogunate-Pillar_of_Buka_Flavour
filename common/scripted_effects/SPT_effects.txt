################
### 政策分类 ###
################
spt_policy_management_effect = {
	switch = {
		trigger = $FLAG$
		
		### 保守
		## 本乡本土封臣好感 ++
		## 宫廷礼制封臣好感 +
		## 追名逐利封臣好感 -
		flag:flag_spt_policy_council_system = {
			$ACTION$_character_modifier = spt_policy_council_system_modifier
			SPT_parochial_vassal_towards_policy_opinion_effect = {
				POLICY_TYPE_SW_1 = no
				POLICY_TYPE_SW_2 = no
				OPINION = 10
			}
			SPT_courtly_vassal_towards_policy_opinion_effect = {
				POLICY_TYPE_SW_1 = no
				POLICY_TYPE_SW_2 = no
				OPINION = 5
			}
		}
		flag:flag_spt_policy_official_purveyor = {
			$ACTION$_character_modifier = spt_policy_official_purveyor_modifier
			SPT_parochial_vassal_towards_policy_opinion_effect = {
				POLICY_TYPE_SW_1 = no
				POLICY_TYPE_SW_2 = no
				OPINION = 10
			}
			SPT_courtly_vassal_towards_policy_opinion_effect = {
				POLICY_TYPE_SW_1 = no
				POLICY_TYPE_SW_2 = no
				OPINION = 5
			}
		}
		flag:flag_spt_policy_foster_system = {
			$ACTION$_character_modifier = spt_policy_foster_system_modifier
			SPT_parochial_vassal_towards_policy_opinion_effect = {
				POLICY_TYPE_SW_1 = no
				POLICY_TYPE_SW_2 = no
				OPINION = 10
			}
			SPT_courtly_vassal_towards_policy_opinion_effect = {
				POLICY_TYPE_SW_1 = no
				POLICY_TYPE_SW_2 = no
				OPINION = 5
			}
		}

		### 中道
		## 宫廷礼制封臣好感 +
		flag:flag_spt_policy_direct_daimyo_rule = {
			$ACTION$_character_modifier = spt_policy_direct_daimyo_rule_modifier
			SPT_courtly_vassal_towards_policy_opinion_effect = {
				POLICY_TYPE_SW_1 = no
				POLICY_TYPE_SW_2 = yes
				OPINION = 5
			}
		}
		flag:flag_spt_policy_improve_labor = {
			$ACTION$_character_modifier = spt_policy_improve_labor_modifier
			SPT_courtly_vassal_towards_policy_opinion_effect = {
				POLICY_TYPE_SW_1 = no
				POLICY_TYPE_SW_2 = yes
				OPINION = 5
			}
		}
		flag:flag_spt_policy_deploy_draftee = {
			$ACTION$_character_modifier = spt_policy_deploy_draftee_modifier
			SPT_courtly_vassal_towards_policy_opinion_effect = {
				POLICY_TYPE_SW_1 = no
				POLICY_TYPE_SW_2 = yes
				OPINION = 5
			}
		}
		flag:flag_spt_policy_improve_militia = {
			$ACTION$_character_modifier = spt_policy_improve_militia_modifier
			SPT_courtly_vassal_towards_policy_opinion_effect = {
				POLICY_TYPE_SW_1 = no
				POLICY_TYPE_SW_2 = yes
				OPINION = 5
			}
		}
		flag:flag_spt_policy_post_horse_system = {
			$ACTION$_character_modifier = spt_policy_post_horse_system_modifier
			SPT_courtly_vassal_towards_policy_opinion_effect = {
				POLICY_TYPE_SW_1 = no
				POLICY_TYPE_SW_2 = yes
				OPINION = 5
			}
		}
		flag:flag_spt_policy_distant_diplomacy = {
			$ACTION$_character_modifier = spt_policy_distant_diplomacy_modifier
			SPT_courtly_vassal_towards_policy_opinion_effect = {
				POLICY_TYPE_SW_1 = no
				POLICY_TYPE_SW_2 = yes
				OPINION = 5
			}
		}
		
		### 革新
		## 宫廷礼制封臣好感 --
		## 本乡本土封臣好感 -
		## 追名逐利封臣好感 ++
		flag:flag_spt_policy_soidier_professionaliztion = {
			$ACTION$_character_modifier = spt_policy_soidier_professionaliztion_modifier
			SPT_glory_hound_vassal_towards_policy_opinion_effect = {
				OPINION = 10
			}
			SPT_courtly_vassal_towards_policy_opinion_effect = {
				POLICY_TYPE_SW_1 = yes
				POLICY_TYPE_SW_2 = no
				OPINION = -10
			}
			SPT_parochial_vassal_towards_policy_opinion_effect = {
				POLICY_TYPE_SW_1 = yes
				POLICY_TYPE_SW_2 = no
				OPINION = -5
			}
		}

		flag:flag_spt_policy_easy_commerce = {
			$ACTION$_character_modifier = spt_policy_easy_commerce_modifier
			SPT_glory_hound_vassal_towards_policy_opinion_effect = {
				OPINION = 10
			}
			SPT_courtly_vassal_towards_policy_opinion_effect = {
				POLICY_TYPE_SW_1 = yes
				POLICY_TYPE_SW_2 = no
				OPINION = -10
			}
			SPT_parochial_vassal_towards_policy_opinion_effect = {
				POLICY_TYPE_SW_1 = yes
				POLICY_TYPE_SW_2 = no
				OPINION = -5
			}
		}

		flag:flag_spt_policy_improve_firearms = {
			$ACTION$_character_modifier = spt_policy_improve_firearms_modifier
			SPT_glory_hound_vassal_towards_policy_opinion_effect = {
				OPINION = 10
			}
			SPT_courtly_vassal_towards_policy_opinion_effect = {
				POLICY_TYPE_SW_1 = yes
				POLICY_TYPE_SW_2 = no
				OPINION = -10
			}
			SPT_parochial_vassal_towards_policy_opinion_effect = {
				POLICY_TYPE_SW_1 = yes
				POLICY_TYPE_SW_2 = no
				OPINION = -5
			}
		}

		flag:flag_spt_policy_supply_transporter = {
			$ACTION$_character_modifier = spt_policy_supply_transporter_modifier
			SPT_glory_hound_vassal_towards_policy_opinion_effect = {
				OPINION = 10
			}
			SPT_courtly_vassal_towards_policy_opinion_effect = {
				POLICY_TYPE_SW_1 = yes
				POLICY_TYPE_SW_2 = no
				OPINION = -10
			}
			SPT_parochial_vassal_towards_policy_opinion_effect = {
				POLICY_TYPE_SW_1 = yes
				POLICY_TYPE_SW_2 = no
				OPINION = -5
			}
		}
	}
}

################
### 封臣立场 ###
################
### 宫廷礼制
SPT_courtly_vassal_towards_policy_opinion_effect = {
	save_temporary_scope_as = actor
	if = {
		limit = { any_vassal = { has_vassal_stance = courtly } }
		if = {
			limit = { 
				$POLICY_TYPE_SW_1$ = no
				$POLICY_TYPE_SW_2$ = no
			}
			custom_tooltip = SPT_courtly_vassal_towards_policy_opinion_effect_tt_0
			hidden_effect = {
				every_vassal = {
					limit = {
						has_vassal_stance = courtly
					}
					add_opinion = {
						target = scope:actor
						modifier = spt_vassal_towards_conservative_policy_opinion
						opinion = $OPINION$
					}
				}
			}
		}
		if = {
			limit = { 
				$POLICY_TYPE_SW_1$ = no
				$POLICY_TYPE_SW_2$ = yes
			}
			custom_tooltip = SPT_courtly_vassal_towards_policy_opinion_effect_tt_1
			hidden_effect = {
				every_vassal = {
					limit = {
						has_vassal_stance = courtly
					}
					add_opinion = {
						target = scope:actor
						modifier = spt_vassal_towards_neutral_policy_opinion
						opinion = $OPINION$
					}
				}
			}
		}
		if = {
			limit = { 
				$POLICY_TYPE_SW_1$ = yes
				$POLICY_TYPE_SW_2$ = no
			}
			custom_tooltip = SPT_courtly_vassal_towards_policy_opinion_effect_tt_2
			hidden_effect = {
				every_vassal = {
					limit = {
						has_vassal_stance = courtly
					}
					add_opinion = {
						target = scope:actor
						modifier = spt_vassal_towards_progressive_policy_opinion
						opinion = $OPINION$
					}
				}
			}
		}
	}
}

SPT_glory_hound_vassal_towards_policy_opinion_effect = {
	save_temporary_scope_as = actor
	if = {
		limit = { any_vassal = { has_vassal_stance = glory_hound } }
		if = {
			limit = {
			}
			custom_tooltip = SPT_glory_hound_vassal_towards_policy_opinion_effect_tt
			hidden_effect = {
				every_vassal = {
					limit = {
						has_vassal_stance = glory_hound
					}
					add_opinion = {
						target = scope:actor
						modifier = spt_vassal_towards_conservative_policy_opinion
						opinion = $OPINION$
					}
				}
			}
		}
	}
}

SPT_parochial_vassal_towards_policy_opinion_effect = {
	save_temporary_scope_as = actor
	if = {
		limit = { any_vassal = { has_vassal_stance = parochial } }
		if = {
			limit = { 
				$POLICY_TYPE_SW_1$ = no
				$POLICY_TYPE_SW_2$ = no
			}
			custom_tooltip = SPT_parochial_vassal_towards_policy_opinion_effect_tt_0
			hidden_effect = {
				every_vassal = {
					limit = {
						has_vassal_stance = parochial
					}
					add_opinion = {
						target = scope:actor
						modifier = spt_vassal_towards_conservative_policy_opinion
						opinion = $OPINION$
					}
				}
			}
		}
		if = {
			limit = { 
				$POLICY_TYPE_SW_1$ = no
				$POLICY_TYPE_SW_2$ = yes
			}
		}
		if = {
			limit = { 
				$POLICY_TYPE_SW_1$ = yes
				$POLICY_TYPE_SW_2$ = no
			}
			custom_tooltip = SPT_parochial_vassal_towards_policy_opinion_effect_tt_2
			hidden_effect = {
				every_vassal = {
					limit = {
						has_vassal_stance = parochial
					}
					add_opinion = {
						target = scope:actor
						modifier = spt_vassal_towards_progressive_policy_opinion
						opinion = $OPINION$
					}
				}
			}
		}
	}
}